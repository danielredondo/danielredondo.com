<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.63.1" />

    
    
    

<title>Leyendo el periódico en R • Daniel Redondo</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Leyendo el periódico en R"/>
<meta name="twitter:description" content="Este post continúa en: iDEAL, la web para visualizar noticias del periódico IDEAL.
El periódico Ideal es el más leído en la provincia de Granada, con una penetración sobre el total de lectores de diarios (sea lo que sea eso) del 89%.
A principios de año, este diario adoptaba en su versión digital una medida llena de controversia: limitar el acceso a sus artículos, estableciendo un límite mensual de noticias."/>

<meta property="og:title" content="Leyendo el periódico en R" />
<meta property="og:description" content="Este post continúa en: iDEAL, la web para visualizar noticias del periódico IDEAL.
El periódico Ideal es el más leído en la provincia de Granada, con una penetración sobre el total de lectores de diarios (sea lo que sea eso) del 89%.
A principios de año, este diario adoptaba en su versión digital una medida llena de controversia: limitar el acceso a sus artículos, estableciendo un límite mensual de noticias." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/20180403_ideal/" />
<meta property="article:published_time" content="2018-04-03T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-04-03T00:00:00+00:00" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.9e8ea8827e8c49bc2e0e658d3103a33ada1814e1f04207faccfc5b5b41008ecf.css" integrity="sha256-no6ogn6MSbwuDmWNMQOjOtoYFOHwQgf6zPxbW0EAjs8=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="/">Daniel Redondo</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="/img/piramide.png" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
         danielredondo.com 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Daniel Redondo</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>BLOG</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/publicaciones/">
						<span>PUBLICACIONES CIENTÍFICAS</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/aplicaciones/">
						<span>APLICACIONES WEB</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>SOBRE MÍ</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/dredondosanchez" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/danielredondo" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/dredondosanchez" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	<a href="mailto:danielredondosanchez@hotmail.com" rel="me"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a>
	
</section>

      </div>
    </div>
    


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Leyendo el periódico en R</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> 2018-04-03
    
    
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/web-scraping">web scraping</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 2 min read
</div>


  </header>
  
  
  <div class="post">
    


<p>Este post continúa en: <strong><a href="/posts/20180418_ideal_shiny/">iDEAL, la web para visualizar noticias del periódico IDEAL</a></strong>.</p>
<p>El periódico <strong><a href="http://www.ideal.es/">Ideal</a></strong> es el más leído en la provincia de Granada, con una penetración sobre el total de lectores de diarios (sea lo que sea eso) <strong><a href="http://www.cmvocento.com/ideal/">del 89%</a></strong>.</p>
<p>A principios de año, este diario adoptaba en su versión digital una medida llena de controversia: limitar el acceso a sus artículos, estableciendo un límite mensual de noticias. Al superar este límite, esto es todo lo que podemos ver en su página web:</p>
<p><img src="https://78.media.tumblr.com/3fef1ae9ffa76c37679cecdb2ba7a1e6/tumblr_inline_pah2bmnaBj1qemyzq_1280.png" /></p>
<p>Esta decisión ha encajado muy bien en la sociedad granadina, que tiene claro que debe pagar para acceder a contenidos actuales de calidad.</p>
<p><img src="https://78.media.tumblr.com/c9affe0bf01c01fdfe42c1991561e282/tumblr_inline_pah2bmACgE1qemyzq_1280.png" /><img src="https://78.media.tumblr.com/c3c362f73ebec52d6f9b91424b7d3d6d/tumblr_inline_pah2bm80Q81qemyzq_1280.png" /><img src="https://78.media.tumblr.com/5c08079e08c649210cc95b06c0253252/tumblr_inline_pah2bnOhlu1qemyzq_1280.png" /></p>
<p>En fin, cambiando totalmente de tema, me estoy iniciando en esto del <strong><a href="https://es.wikipedia.org/wiki/Web_scraping">web scraping</a></strong>, una técnica tan potente que pensé que estaba reservada sólo para unos pocos. Animado por <strong><a href="https://datacritics.com/2018/03/20/scrape-it-yourself-spotify-charts">este artículo</a></strong>, y siguiendo sus directrices, me he lanzado a la piscina con un pequeño script en R.</p>
<div id="el-codigo-se-alimenta-del-enlace-de-cualquier-articulo-de-tu-periodico-granadino-de-referencia-y-genera-la-noticia-como-salida-sin-importar-limites-ni-restricciones." class="section level3">
<h3>El código se alimenta del enlace de cualquier artículo de tu periódico granadino de referencia, y genera la noticia como salida, sin importar límites ni restricciones.</h3>
<p>Aquí el código:</p>
<pre class="r"><code>library(tidyverse)
library(xml2)
library(rvest)

url &lt;- &quot;http://www.ideal.es/granada/vota-granada-semifinal-20180328160038-nt.html&quot;

titulo &lt;- url %&gt;% read_html() %&gt;% html_nodes(&#39;h1&#39;) %&gt;% html_text() %&gt;% as.data.frame() %&gt;% pull(1) %&gt;% levels()
subtitulo_y_categoria &lt;- url %&gt;% read_html() %&gt;% html_nodes(&#39;h2&#39;) %&gt;% html_text() %&gt;% as.data.frame() %&gt;% pull(1) %&gt;% levels()
   subtitulo &lt;- subtitulo_y_categoria[1]
   categoria &lt;- subtitulo_y_categoria[2]
cuerpo_original &lt;- url %&gt;% read_html() %&gt;% html_nodes(&#39;p&#39;) %&gt;% html_text()

# Ordenamos el cuerpo
cuerpo_recortado &lt;- cuerpo_original[25:(length(cuerpo_original) - 1)]
cuerpo &lt;- cuerpo_recortado[1]
for (i in 2:length(cuerpo_recortado)){
  gsub(&quot;  &quot;, &quot;&quot;, cuerpo_recortado[i])
  if(cuerpo_recortado[i]!=&quot;&quot;) cuerpo &lt;- rbind(cuerpo, cuerpo_recortado[i])
}

imprimir_noticia &lt;- function(n_titulo, n_subtitulo, n_categoria, n_cuerpo){ 
  guiones &lt;- replicate(50, &quot;-&quot;) %&gt;% paste(collapse = &quot;&quot;)
  cat(paste(c(guiones, &quot;Título: &quot;, n_titulo, guiones), collapse = &quot;\n&quot;))
  cat(paste(c(guiones, &quot;Subtítulo: &quot;, n_subtitulo, guiones), collapse = &quot;\n&quot;))
  cat(paste(c(guiones, &quot;Categoría: &quot;, n_categoria, guiones), collapse = &quot;\n&quot;))
  cat(paste(c(guiones, &quot;Cuerpo: &quot;, n_cuerpo, guiones), collapse = &quot;\n&quot;))
}

imprimir_noticia(titulo, subtitulo, categoria, cuerpo)</code></pre>
<p>Y aquí la salida:</p>
<p><img src="https://78.media.tumblr.com/ee7cfd621699e23141d25a1891f4957c/tumblr_inline_pah2bndVwh1qemyzq_1280.png" /></p>
<p>Este post continúa en: <strong><a href="/posts/20180418_ideal_shiny/">iDEAL, la web para visualizar noticias del periódico IDEAL</a></strong>.</p>
</div>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/20180215_vis_navidad/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Visualizando... la lotería de Navidad</span>
    </a>
    
    
    <a href="/posts/20180418_ideal_shiny/" class="navigation-next">
      <span class="navigation-tittle">iDEAL, la web para visualizar noticias del IDEAL</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-129757599-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/r.min.js"></script>
            
        
    
    <script type="text/javascript">
        
        hljs.configure({languages: ["r"]});
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
