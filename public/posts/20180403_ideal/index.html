<!DOCTYPE html>
<html lang="en" class="wf-firasans-n4-active wf-active">
	<head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Enable responsiveness on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    
    
    <meta name="generator" content="Hugo 0.42.1" />
    
    <title>Leyendo el periódico en R &middot; Daniel Redondo</title>
    <meta content="Leyendo el periódico en R - Daniel Redondo" property="og:title">
    <meta content=" - " property="og:description">
    <!-- CSS -->
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans:300,300i,400,400i|Roboto+Mono:300,300i,400,400i" rel="stylesheet">
    <link rel="stylesheet" href="/css/print.css" media="print">
    <link rel="stylesheet" href="/css/poole.css">
    <link rel="stylesheet" href="/css/hyde.css">
    <!-- Font-Awesome -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>
    <!-- highlight.js-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <!-- Customised CSS -->
    <link rel="stylesheet" href="/css/custom.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/img/favicon.png">
    

	</head>
    <body class="theme-custom-drs ">
        <div class="sidebar">
  <div class="container text-center ">
    <div class="sidebar-about text-center">
      <a href="/"><h1 class="brand">Daniel Redondo</h1></a>
       <img src="/img/piramide.png" alt="Author Image" class="img-circle headshot center"> 
      <p class="lead">
         danielredondo.com 
      </p>
    </div>
    
<div>
	<ul class="sidebar-nav">
		
		
				<li>
					<a href="/posts/"> <span>PUBLICACIONES</span></a>
				</li>
				<li>
					<a href="/tags/visualizando"> <span>VISUALIZANDO...</span></a>
				</li>
				<li>
					<a href="/aplicaciones/"> <span>APLICACIONES</span></a>
				</li>
				<li>
					<a href="/about/"> <span>SOBRE MÍ</span></a>
				</li>
		</li>
	</ul>
</div>

    <p>
      <section class="row text-center">
	
	<a href="https://twitter.com/dredondosanchez"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	&nbsp;<a href="https://github.com/danielredondo"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	
	&nbsp;<a href="mailto:danielredondosanchez@hotmail.com"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a>
	
</section>

    </p>
    <p class="copyright">&copy; 2018 Daniel Redondo.
      <a href="https://creativecommons.org/licenses/by/4.0"><br/>Some Rights Reserved</a>.<br/>Built with <a href="https://github.com/rstudio/blogdown">blogdown</a>, <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
    </p>
  </div>
  <div>
  </div>
</div>

        <div class="content container">
            <div class="post">
  <h1>Leyendo el periódico en R</h1>
  
  <div class="col-sm-12 col-md-12">
    <span class="text-left post-date meta">
            
       
        <i class="fas fa-calendar-alt"></i> Apr 3, 2018
      
      
      
      
        
        
            <br/>
             <i class="fas fa-tags"></i>
            
            <a class="meta" href="/tags/web-scraping">web scraping</a>
        
      
      
      <br/>
      <i class="fas fa-clock"></i> 2 min read 
      </span>  
  </div>    
  
  <p>Este post continúa en: <strong><a href="/posts/20180418_ideal_shiny/">iDEAL, la web para visualizar noticias del periódico IDEAL</a></strong>.</p>
<p>El periódico <strong><a href="http://www.ideal.es/">Ideal</a></strong> es el más leído en la provincia de Granada, con una penetración sobre el total de lectores de diarios (sea lo que sea eso) <strong><a href="http://www.cmvocento.com/ideal/">del 89%</a></strong>.</p>
<p>A principios de año, este diario adoptaba en su versión digital una medida llena de controversia: limitar el acceso a sus artículos, estableciendo un límite mensual de noticias. Al superar este límite, esto es todo lo que podemos ver en su página web:</p>
<div class="figure">
<img src="https://78.media.tumblr.com/3fef1ae9ffa76c37679cecdb2ba7a1e6/tumblr_inline_pah2bmnaBj1qemyzq_1280.png" />

</div>
<p>Esta decisión ha encajado muy bien en la sociedad granadina, que tiene claro que debe pagar para acceder a contenidos actuales de calidad.</p>
<p><img src="https://78.media.tumblr.com/c9affe0bf01c01fdfe42c1991561e282/tumblr_inline_pah2bmACgE1qemyzq_1280.png" /><img src="https://78.media.tumblr.com/c3c362f73ebec52d6f9b91424b7d3d6d/tumblr_inline_pah2bm80Q81qemyzq_1280.png" /><img src="https://78.media.tumblr.com/5c08079e08c649210cc95b06c0253252/tumblr_inline_pah2bnOhlu1qemyzq_1280.png" /></p>
<p>En fin, cambiando totalmente de tema, me estoy iniciando en esto del <strong><a href="https://es.wikipedia.org/wiki/Web_scraping">web scraping</a></strong>, una técnica tan potente que pensé que estaba reservada sólo para unos pocos. Animado por <strong><a href="https://datacritics.com/2018/03/20/scrape-it-yourself-spotify-charts">este artículo</a></strong>, y siguiendo sus directrices, me he lanzado a la piscina con un pequeño script en R.</p>
<div id="el-codigo-se-alimenta-del-enlace-de-cualquier-articulo-de-tu-periodico-granadino-de-referencia-y-genera-la-noticia-como-salida-sin-importar-limites-ni-restricciones." class="section level3">
<h3>El código se alimenta del enlace de cualquier artículo de tu periódico granadino de referencia, y genera la noticia como salida, sin importar límites ni restricciones.</h3>
<p>Aquí el código:</p>
<pre class="r"><code>library(tidyverse)
library(xml2)
library(rvest)

url &lt;- &quot;http://www.ideal.es/granada/vota-granada-semifinal-20180328160038-nt.html&quot;

titulo &lt;- url %&gt;% read_html() %&gt;% html_nodes(&#39;h1&#39;) %&gt;% html_text() %&gt;% as.data.frame() %&gt;% pull(1) %&gt;% levels()
subtitulo_y_categoria &lt;- url %&gt;% read_html() %&gt;% html_nodes(&#39;h2&#39;) %&gt;% html_text() %&gt;% as.data.frame() %&gt;% pull(1) %&gt;% levels()
   subtitulo &lt;- subtitulo_y_categoria[1]
   categoria &lt;- subtitulo_y_categoria[2]
cuerpo_original &lt;- url %&gt;% read_html() %&gt;% html_nodes(&#39;p&#39;) %&gt;% html_text()

# Ordenamos el cuerpo
cuerpo_recortado &lt;- cuerpo_original[25:(length(cuerpo_original) - 1)]
cuerpo &lt;- cuerpo_recortado[1]
for (i in 2:length(cuerpo_recortado)){
  gsub(&quot;  &quot;, &quot;&quot;, cuerpo_recortado[i])
  if(cuerpo_recortado[i]!=&quot;&quot;) cuerpo &lt;- rbind(cuerpo, cuerpo_recortado[i])
}

imprimir_noticia &lt;- function(n_titulo, n_subtitulo, n_categoria, n_cuerpo){ 
  guiones &lt;- replicate(50, &quot;-&quot;) %&gt;% paste(collapse = &quot;&quot;)
  cat(paste(c(guiones, &quot;Título: &quot;, n_titulo, guiones), collapse = &quot;\n&quot;))
  cat(paste(c(guiones, &quot;Subtítulo: &quot;, n_subtitulo, guiones), collapse = &quot;\n&quot;))
  cat(paste(c(guiones, &quot;Categoría: &quot;, n_categoria, guiones), collapse = &quot;\n&quot;))
  cat(paste(c(guiones, &quot;Cuerpo: &quot;, n_cuerpo, guiones), collapse = &quot;\n&quot;))
}

imprimir_noticia(titulo, subtitulo, categoria, cuerpo)</code></pre>
<p>Y aquí la salida:</p>
<div class="figure">
<img src="https://78.media.tumblr.com/ee7cfd621699e23141d25a1891f4957c/tumblr_inline_pah2bndVwh1qemyzq_1280.png" />

</div>
<p>Este post continúa en: <strong><a href="/posts/20180418_ideal_shiny/">iDEAL, la web para visualizar noticias del periódico IDEAL</a></strong>.</p>
</div>

</div>
            <div class="footer">
                <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<script type="text/javascript">
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
</script>

    

            </div>
        </div>
        
        
    </body>
</html>
