<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.63.2" />

    
    
    

<title>Mapa de Granada con logos hexagonales de paquetes de R • Daniel Redondo</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mapa de Granada con logos hexagonales de paquetes de R"/>
<meta name="twitter:description" content="Hace unos días tuvo lugar la reunión sobre R de carácter anual useR!, celebrada este año en Brisbane, Australia. Para la ocasión, crearon un mapa del país compuesto por logos de paquetes de R, que son de forma hexagonal.
Siguiendo las instrucciones de esta publicación en el blog de Mitchell O’Hara-Wild, me propuse hacer lo mismo para la provincia de Granada, donde resido y trabajo.
El código que encontrarás aquí es totalmente reproducible y adaptable para tu provincia."/>

<meta property="og:title" content="Mapa de Granada con logos hexagonales de paquetes de R" />
<meta property="og:description" content="Hace unos días tuvo lugar la reunión sobre R de carácter anual useR!, celebrada este año en Brisbane, Australia. Para la ocasión, crearon un mapa del país compuesto por logos de paquetes de R, que son de forma hexagonal.
Siguiendo las instrucciones de esta publicación en el blog de Mitchell O’Hara-Wild, me propuse hacer lo mismo para la provincia de Granada, donde resido y trabajo.
El código que encontrarás aquí es totalmente reproducible y adaptable para tu provincia." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/20180723_granada_hex/" />
<meta property="article:published_time" content="2018-07-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-07-23T00:00:00+00:00" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.9e8ea8827e8c49bc2e0e658d3103a33ada1814e1f04207faccfc5b5b41008ecf.css" integrity="sha256-no6ogn6MSbwuDmWNMQOjOtoYFOHwQgf6zPxbW0EAjs8=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="/">Daniel Redondo</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="/img/piramide.png" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
         danielredondo.com 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Daniel Redondo</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>BLOG</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/publicaciones/">
						<span>PUBLICACIONES CIENTÍFICAS</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/aplicaciones/">
						<span>APLICACIONES WEB</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>SOBRE MÍ</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/dredondosanchez" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/danielredondo" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<a href="mailto:danielredondosanchez@hotmail.com" rel="me"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a>
	
</section>

      </div>
    </div>
    


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Mapa de Granada con logos hexagonales de paquetes de R</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> 2018-07-23
    
    
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/mapas">mapas</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 2 min read
</div>


  </header>
  
  
  <div class="post">
    


<p>Hace unos días tuvo lugar la reunión sobre R de carácter anual <strong>useR!</strong>, celebrada este año en Brisbane, Australia. Para la ocasión, crearon un mapa del país compuesto por logos de paquetes de R, que son de forma hexagonal.</p>
<p><img src="/posts/20180723_granada_hex/aus.png" /></p>
<p>Siguiendo las instrucciones de <strong><a href="https://blog.mitchelloharawild.com/blog/user-2018-feature-wall/">esta publicación en el blog de Mitchell O’Hara-Wild</a></strong>, me propuse hacer lo mismo para la provincia de Granada, donde resido y trabajo.</p>
<p>El código que encontrarás aquí es totalmente reproducible y adaptable para tu provincia.</p>
<p>La información geográfica está descargada del <strong><a href="https://www.cnig.es">Instituto Geográfico Nacional</a></strong>, aunque también puedes usar el paquete <code>raster</code> como hicieron en la publicación original con Australia.</p>
<pre class="r"><code># Cargamos los paquetes iniciales
library(dplyr)
library(rgdal)
library(sp)
library(ggplot2)
library(sf)

# Leemos el .shp
provincias &lt;- readOGR(&quot;lineas_limite/recintos_provinciales_inspire_peninbal_etrs89/recintos_provinciales_inspire_peninbal_etrs89.shp&quot;,
              use_iconv = TRUE,
              encoding = &quot;UTF-8&quot;)

# Seleccionamos la provincia de interés
granada &lt;- provincias %&gt;% subset(NAMEUNIT == &quot;Granada&quot;)

# Representamos el mapa seleccionado
ggplot() + geom_sf(data = st_as_sf(granada))</code></pre>
<p><img src="/posts/20180723_granada_hex/ggranada.png" /></p>
<pre class="r"><code># Seleccionamos el tamaño de los hexágonos, que variará en función a:
#   - El tamaño del área que queramos cubrir
#   - El número de logos que queramos incluir
hex_points &lt;- granada %&gt;% spsample(type = &quot;hexagonal&quot;, cellsize = .1)

# Aquí podemos ver cuántos hexágonos hay:
as_tibble(hex_points@coords)

# Especificamos de nuevo el tamaño de los hexágonos 
granada_hex &lt;- HexPoints2SpatialPolygons(hex_points, dx = .1)

# Representamos el mapa original con los hexágonos superpuestos, para ver cómo quedaría:
ggplot() + 
  geom_sf(data = st_as_sf(granada)) + 
  geom_sf(data = st_as_sf(granada_hex), colour = &quot;blue&quot;, fill = NA)</code></pre>
<p><img src="/posts/20180723_granada_hex/ggranada_hex.png" /></p>
<p>Si no te convence el resultado final, puedes volver a ejecutar la última caja de código para que se tome una muestra (ligeramente) distinta.</p>
<p>Para finalizar, usamos una función, <code>hexwall</code>, escrita por <strong><a href="https://github.com/mitchelloharawild/hexwall">Mitchell O’Hara-Wild, y disponible en su GitHub</a></strong>. Puedes descargarte el script en .zip (Clone or download -&gt; Download ZIP) y luego cargarlo en R usando <code>source</code>.</p>
<p><img src="/posts/20180723_granada_hex/git.png" alt="git" width=75%/></p>
<pre class="r"><code>source(&quot;hexwall-master/hexwall.R&quot;)</code></pre>
<p>Los parámetros de la función <code>hexwall</code> son simples:</p>
<ul>
<li>la carpeta donde tenemos los logos</li>
<li>el ancho en píxeles de la imagen (¡cuidado! un tamaño muy grande podría hacer que el tiempo de ejecución se dispare).</li>
<li>las coordenadas de los hexágonos</li>
<li>y un modo de ordenación de los logos.</li>
</ul>
<p>Yo he seleccionado algunos logos de paquetes que uso a menudo, y el resultado, con ordenación aleatoria, es el siguiente:</p>
<pre class="r"><code>hexwall(
  &quot;samplehex&quot;,
  sticker_width = 200,
  coords = hex_points@coords,
  sort_mode = &quot;random&quot;
)</code></pre>
<p><img src="/posts/20180723_granada_hex/preview_random.png" /></p>
<p>Y para terminar, os enseño cómo quedaría si ordenamos los stickers por color:</p>
<pre class="r"><code>hexwall(
  &quot;samplehex&quot;,
  sticker_width = 200,
  coords = hex_points@coords,
  sort_mode = &quot;color&quot;
)</code></pre>
<p><img src="/posts/20180723_granada_hex/preview_color.png" /></p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/20180713_cifc_gif/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Mapa animado: haciendo un gif con R y leaflet</span>
    </a>
    
    
    <a href="/posts/20181010_ens/" class="navigation-next">
      <span class="navigation-tittle">Importando en R la Encuesta Nacional de Salud de 2017</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-129757599-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
            
                <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/r.min.js"></script>
            
        
    
    <script type="text/javascript">
        
        hljs.configure({languages: ["r"]});
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
